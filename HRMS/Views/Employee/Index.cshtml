@model IEnumerable<HRMS.Models.Employee>
@{
    ViewData["Title"] = "All Employees";
}

<div style="margin-bottom: 2rem;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <div>
            <h2 style="font-size: 1.75rem; margin-bottom: 0.5rem;">All Employees</h2>
            <p class="text-muted">Manage and view all employees in the system</p>
        </div>
        <a asp-controller="Account" asp-action="CreateEmployeeAccount" class="btn-premium btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem; vertical-align: middle;">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Create Employee Account
        </a>
    </div>
</div>

<div class="premium-card">
    @if (Model != null && Model.Any())
    {
        <div style="overflow-x: auto;">
            <table class="table-premium">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Department</th>
                        <th>Position</th>
                        <th>Roles</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var employee in Model)
                    {
                        <tr>
                            <td>
                                <div style="display: flex; align-items: center; gap: 0.75rem;">
                                    @if (!string.IsNullOrEmpty(employee.profile_image))
                                    {
                                        <img src="@employee.profile_image" alt="@employee.full_name" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;" />
                                    }
                                    else
                                    {
                                        <div style="width: 40px; height: 40px; background: var(--color-primary-light); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.875rem;">
                                            @(employee.first_name?.Substring(0, 1).ToUpper() ?? "?")
                                        </div>
                                    }
                                    <div>
                                        <div style="font-weight: 600;">@(employee.full_name ?? $"{employee.first_name} {employee.last_name}")</div>
                                        <div style="font-size: 0.85rem; color: var(--color-text-secondary);">@employee.phone</div>
                                    </div>
                                </div>
                            </td>
                            <td>@employee.email</td>
                            <td>@(employee.department?.department_name ?? "N/A")</td>
                            <td>@(employee.position?.position_title ?? "N/A")</td>
                            <td>
                                @if (employee.Employee_Role != null && employee.Employee_Role.Any())
                                {
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.25rem;">
                                        @foreach (var role in employee.Employee_Role)
                                        {
                                            <span style="background: var(--color-primary-light); color: white; padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.75rem; font-weight: 500;">
                                                @role.role.role_name
                                            </span>
                                        }
                                    </div>
                                }
                                else
                                {
                                    <span style="color: var(--color-text-secondary); font-size: 0.85rem;">No roles</span>
                                }
                            </td>
                            <td>
                                @if (employee.is_active == true)
                                {
                                    <span style="background: rgba(34, 197, 94, 0.1); color: #15803d; padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.75rem; font-weight: 500;">
                                        Active
                                    </span>
                                }
                                else
                                {
                                    <span style="background: rgba(239, 68, 68, 0.1); color: #dc2626; padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.75rem; font-weight: 500;">
                                        Inactive
                                    </span>
                                }
                            </td>
                            <td>
                                <div style="display: flex; gap: 0.5rem;">
                                    <a asp-action="Details" asp-route-id="@employee.employee_id" class="btn-premium btn-secondary" style="padding: 0.4rem 0.8rem; font-size: 0.85rem;">
                                        View
                                    </a>
                                    <a asp-action="Edit" asp-route-id="@employee.employee_id" class="btn-premium btn-primary" style="padding: 0.4rem 0.8rem; font-size: 0.85rem;">
                                        Edit
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div style="text-align: center; padding: 3rem;">
            <p style="color: var(--color-text-secondary); margin-bottom: 1rem;">No employees found.</p>
            <a asp-controller="Account" asp-action="CreateEmployeeAccount" class="btn-premium btn-primary">
                Create First Employee
            </a>
        </div>
    }
</div>



